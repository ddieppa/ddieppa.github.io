---
import BaseLayout from '@/layouts/BaseLayout.astro';
import SocialLinks from '@/components/SocialLinks.astro';
---

<BaseLayout title="About">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <article class="prose prose-lg max-w-none">
      <!-- Header -->
      <header class="mb-12 not-prose">
        <div class="flex flex-col sm:flex-row items-center gap-6 mb-8">
          <div id="about-avatar" class="relative w-32 h-32 rounded-full overflow-hidden shadow-lg ring-4 ring-[var(--bg-tertiary)] bg-gradient-to-br from-[var(--gradient-start)] to-[var(--gradient-end)] flex items-center justify-center">
            <img 
              id="about-profile-img"
              src="/profile.jpg" 
              alt="Daniel Dieppa"
              class="w-full h-full object-cover hidden"
            />
            <span id="about-fallback" class="text-white text-4xl font-bold">DD</span>
          </div>
          <div class="text-center sm:text-left">
            <h1 class="text-4xl font-bold mb-2">Daniel Dieppa</h1>
            <p class="text-xl" style="color: var(--text-secondary);">Senior Software Developer</p>
            <div class="mt-4">
              <SocialLinks />
            </div>
          </div>
        </div>
      </header>
      
      <!-- Bio -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold mb-4 pb-2 border-b" style="border-color: var(--border-color);">About Me</h2>
        <p style="color: var(--text-secondary);">
          I'm an experienced Senior Backend Developer specializing in <strong>.NET Core / ASP.NET</strong>, <strong>C#</strong>, 
          and <strong>Azure Cloud Services</strong>. With a passion for building scalable, maintainable systems, 
          I focus on implementing Clean Architecture, CQRS patterns, and modernizing legacy applications.
        </p>
        <p style="color: var(--text-secondary);">
          My experience spans multiple industries including automotive, fintech, healthcare, and e-commerce. 
          I believe in writing clean, testable code and creating solutions that solve real business problems.
        </p>
        <p style="color: var(--text-secondary);">
          Through this blog, I share my experiences, lessons learned, and insights from building enterprise 
          applications. Whether it's deep dives into .NET patterns, Azure architecture decisions, or 
          thoughts on software craftsmanship, I hope you find something valuable here.
        </p>
      </section>
      
      <!-- What I Do -->
      <section class="mb-12 not-prose">
        <h2 class="text-2xl font-bold mb-6 pb-2 border-b" style="border-color: var(--border-color);">What I Do</h2>
        <div class="grid gap-4 sm:grid-cols-2">
          <div class="p-5 rounded-xl border" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--gradient-start)] to-[var(--gradient-end)] flex items-center justify-center mb-3">
              <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
              </svg>
            </div>
            <h3 class="font-semibold mb-2">Backend Development</h3>
            <p class="text-sm" style="color: var(--text-secondary);">Building scalable APIs, microservices, and distributed systems with .NET and C#.</p>
          </div>
          
          <div class="p-5 rounded-xl border" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--gradient-start)] to-[var(--gradient-end)] flex items-center justify-center mb-3">
              <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
              </svg>
            </div>
            <h3 class="font-semibold mb-2">Cloud Architecture</h3>
            <p class="text-sm" style="color: var(--text-secondary);">Designing and implementing Azure solutions including Functions, Service Bus, and more.</p>
          </div>
          
          <div class="p-5 rounded-xl border" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--gradient-start)] to-[var(--gradient-end)] flex items-center justify-center mb-3">
              <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" />
              </svg>
            </div>
            <h3 class="font-semibold mb-2">Clean Architecture</h3>
            <p class="text-sm" style="color: var(--text-secondary);">Implementing SOLID principles, CQRS, and domain-driven design for maintainable code.</p>
          </div>
          
          <div class="p-5 rounded-xl border" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--gradient-start)] to-[var(--gradient-end)] flex items-center justify-center mb-3">
              <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
              </svg>
            </div>
            <h3 class="font-semibold mb-2">System Modernization</h3>
            <p class="text-sm" style="color: var(--text-secondary);">Migrating and refactoring legacy systems to modern, scalable architectures.</p>
          </div>
        </div>
      </section>
      
      <!-- Tech Stack -->
      <section class="not-prose">
        <h2 class="text-2xl font-bold mb-6 pb-2 border-b" style="border-color: var(--border-color);">Tech Stack</h2>
        <div class="flex flex-wrap gap-2">
          {['C#', '.NET Core', 'ASP.NET', 'Azure', 'Entity Framework', 'SQL Server', 'Redis', 'Docker', 'MediatR', 'GraphQL', 'xUnit', 'Git'].map(tech => (
            <span class="px-3 py-1.5 rounded-lg text-sm font-medium" style="background-color: var(--bg-tertiary); color: var(--text-secondary);">
              {tech}
            </span>
          ))}
        </div>
      </section>
    </article>
  </div>
</BaseLayout>

<script>
  // Handle about page profile image fallback
  const aboutImg = document.getElementById('about-profile-img') as HTMLImageElement | null;
  const aboutFallback = document.getElementById('about-fallback');
  
  if (aboutImg && aboutFallback) {
    aboutImg.addEventListener('load', () => {
      aboutImg.classList.remove('hidden');
      aboutFallback.classList.add('hidden');
    });
    
    aboutImg.addEventListener('error', () => {
      aboutImg.classList.add('hidden');
      aboutFallback.classList.remove('hidden');
    });
    
    // Check if image loads on page load
    if (aboutImg.complete && aboutImg.naturalHeight !== 0) {
      aboutImg.classList.remove('hidden');
      aboutFallback.classList.add('hidden');
    }
  }
</script>

